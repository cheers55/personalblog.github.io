# ğŸŒˆ èµ°è¿›å°ç¨‹åºè·¨ç«¯æ¡†æ¶åŸç†

ç”±äºå…¬å¸ä¸€äº›ä¸šåŠ¡å‘å±•çš„éœ€æ±‚ï¼Œæœ‰ä½¿ç”¨ `mpvue` å¼€å‘è¿‡ `å¾®ä¿¡å°ç¨‹åº åŠ æ”¯ä»˜å®å°ç¨‹åº`ï¼Œæ„Ÿå…´è¶£çš„å°ä¼™ä¼´å¯ä»¥åœ¨ `å¾®ä¿¡ã€æ”¯ä»˜å®` æœç´¢ `äº«æƒ è¾¾äºº` æŸ¥çœ‹å…·ä½“çš„å°ç¨‹åºé¡¹ç›®ã€‚ä¹‹åè¿˜ä½¿ç”¨è¿‡ `Taro ã€ å¾®ä¿¡åŸç”Ÿapi` å¼€å‘è¿‡ `æ‹¼å›¢ã€å•†åŸç­‰` 10 å‡ ä¸ªä¸åŒç±»å‹çš„å°ç¨‹åºã€‚å¦‚ `iéº¦å½“åŠ³é’±åŒ…ä½™é¢ã€ä½³è–ªæ£ ã€å…‰ç¦¹é›†å›¢ã€å¼€å¼ å‰ç¥¥å¤§å‰ã€ç†ŠçŒ«å•†æˆ·å…­` ç­‰ã€‚

## 1ã€å°ç¨‹åºè·¨ç«¯æ¡†æ¶åˆ†ç±»

ä»æ¡†æ¶çš„è¯­æ³•æ¥è¯´ï¼Œå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š

1. **Vue è¯­æ³• / ç±» Vue è¯­æ³•**ï¼›
2. **React è¯­æ³• / ç±» React è¯­æ³•**ï¼›

| æ¡†æ¶      | è¯­æ³•                         | å‚å®¶     |
| :-------- | :--------------------------- | :------- |
| Taro 1/2  | ç±» Reactï¼ˆnerveï¼‰            | äº¬ä¸œ     |
| Taro next | React æˆ– Vue æˆ– Vue3 æˆ– Nerv | äº¬ä¸œ     |
| remax     | React                        | èš‚èšé‡‘æœ |
| mpvue     | Vue                          | ç¾å›¢     |
| uni-app   | Vue                          | Hbuilder |
| megalo    | Vue                          | ç½‘æ˜“è€ƒæ‹‰ |
| wepy      | ç±» Vue                       | è…¾è®¯     |
| chameloen | ç±» Vue                       | æ»´æ»´     |

## 2ã€å®ç°åŸç†åˆ†ç±»

1. **ç¼–è¯‘æ—¶ï¼ˆcompile timeï¼‰**ï¼›
2. **è¿è¡Œæ—¶ï¼ˆruntimeï¼‰**ï¼›

| åˆ†ç±»         | å®ç°åŸç†                                                                                 |
| :----------- | :--------------------------------------------------------------------------------------- |
| compile time | åœ¨ç¼–è¯‘æ‰“åŒ…è¿‡ç¨‹ä¸­ï¼Œåˆ©ç”¨ babel å·¥å…·é€šè¿‡ AST è¿›è¡Œè½¬è¯‘ï¼Œç”Ÿæˆç¬¦åˆå°ç¨‹åºè§„åˆ™çš„ä»£ç ã€‚           |
| runtime      | åœ¨å°ç¨‹åºçš„é€»è¾‘å±‚ä¸­è¿è¡Œèµ· **React** æˆ–è€… **Vue** çš„è¿è¡Œæ—¶ï¼Œé€šè¿‡é€‚é…å±‚ï¼Œå®ç°è‡ªå®šä¹‰æ¸²æŸ“å™¨ã€‚ |

## 3ã€Vue è·¨ç«¯æ¡†æ¶

`.vue` æ–‡ä»¶ç”± 3 ä¸ªéƒ¨åˆ†ç»„æˆï¼š`templateã€scriptã€style`ã€‚

å¾®ä¿¡å°ç¨‹åº ç”± 4 ä¸ªéƒ¨åˆ†ç»„æˆï¼š`wxmlã€wxssã€jsã€json`ã€‚

### 3.1 style

åœ¨ `vue` ç¯å¢ƒä¸­çš„ `cssæ ·å¼`ï¼Œå¤§éƒ¨åˆ†å¯ä»¥ç›´æ¥æŒªåˆ° `.wxss`ï¼Œé™¤äº†å°‘éƒ¨åˆ†ä¸æ”¯æŒçš„å±æ€§å’Œå°ç¨‹åºçš„å•ä½è½¬æ¢ã€‚

### 3.2 template

`vue` ä¸­çš„å¾ˆå¤šæ ‡ç­¾ä¹Ÿéœ€è¦è¿›è¡Œè½¬åŒ–æˆå¯¹åº”çš„å°ç¨‹åºè¯­æ³•ã€‚å¦‚ï¼š`div` è½¬åŒ–æˆ `view`ã€‚

`vue` ä¸­çš„å¾ˆå¤šç»‘å®šäº‹ä»¶ä¹Ÿéœ€è¦è¿›è¡Œè½¬åŒ–æˆå¯¹åº”çš„ç»‘å®šäº‹ä»¶ã€‚å¦‚ï¼š`@` è½¬åŒ–æˆ `bind`ï¼Œ`tap` äº‹ä»¶è½¬åŒ–æˆ `click` äº‹ä»¶ã€‚

`vue` ä¸­çš„å¾ˆå¤šæ¨¡æ¿è¯­æ³•ä¹Ÿéœ€è¦è¿›è¡Œè½¬åŒ–æˆå¯¹åº”çš„å°ç¨‹åºæ¨¡æ¿è¯­æ³•ã€‚å¦‚ï¼š`v-if` è½¬åŒ–æˆ `wx:if`ã€‚

`template` æ˜¯é‡‡ç”¨äº† `AST` æ¥è§£æè½¬åŒ–æ¨¡æ¿ã€‚æ¨¡æ¿æ›¿æ¢è¿‡ç¨‹å…¶å®å°±æ˜¯ä¸¤ä¾§å¯¹é½è¯­æ³•çš„è¿‡ç¨‹ï¼ŒæŠŠè¯­æ³•ä¸ä¸€è‡´çš„åœ°æ–¹æ”¹æˆä¸€æ ·çš„ã€‚

### 3.3 script

`vue`ä¸­çš„ä»£ç æ˜¯**å®Œå…¨å¯ä»¥è·‘åœ¨å°ç¨‹åºçš„é€»è¾‘å±‚**é‡Œé¢çš„ï¼Œæ¯•ç«Ÿ `vue` å¤§éƒ¨åˆ†å…¶å®å°±æ˜¯çº¯ç²¹çš„ `javascript`ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå°ç¨‹åºçš„æ¸²æŸ“å±‚é‡Œé¢æ˜¯å®Œå…¨å¯ä»¥ç›´æ¥è¿è¡Œèµ·æ¥ `vue` çš„è¿è¡Œæ—¶å’Œ `react` çš„è¿è¡Œæ—¶çš„ã€‚ä½†æ˜¯å°ç¨‹åºå¹³å°è§„å®šè¦åœ¨è°ƒç”¨ `Page()` æ–¹æ³•ç”Ÿæˆä¸€ä¸ª `page` å®ä¾‹ï¼Œå¦åˆ™é¡µé¢å°±ä¼šæŠ¥é”™ã€‚äºæ˜¯åœ¨ `vue` å®ä¾‹åŒ–çš„æ—¶å€™ï¼Œä¼šè°ƒç”¨ `init` æ–¹æ³•ï¼Œåœ¨ `init` æ–¹æ³•é‡Œé¢ä¼šè°ƒç”¨ `Page()` å‡½æ•°ï¼Œç”Ÿæˆä¸€ä¸ªå°ç¨‹åºçš„ `page` å®ä¾‹ã€‚


```
new Vue(){};
Vue.init = () => {
    // åœ¨ vue åˆå§‹åŒ–çš„æ—¶å€™ï¼Œè°ƒç”¨äº† page() æ–¹æ³•
    Page();
}
```

ä½†æ˜¯è¿™æ ·åœ¨ä¸€ä¸ªå°ç¨‹åºé¡µé¢ä¸­ï¼Œå°±ä¼šåŒæ—¶å­˜åœ¨ä¸€ä¸ª `vue` å®ä¾‹å’Œä¸€ä¸ªå°ç¨‹åºçš„ `page` å®ä¾‹ï¼Œä»–ä»¬åˆæ˜¯æ€ä¹ˆä¸€èµ·å·¥ä½œçš„å‘¢ï¼Ÿä¸ºäº†æ›´æ–¹ä¾¿ç†è§£ï¼Œè¦è®²ä¸€ä¸‹ `vue` çš„æ ¸å¿ƒæµç¨‹ã€‚

### 3.4 Vue çš„æ ¸å¿ƒæµç¨‹

![](https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3ce2f4c14ce048d79caa00539c203a87~tplv-k3u1fbpfcp-watermark.image)

å¦‚ä¸‹å›¾æ‰€ç¤ºï¼Œ`template` æ¨¡æ¿éƒ¨åˆ†ä¼šåœ¨ç¼–è¾‘æ‰“åŒ…çš„è¿‡ç¨‹ä¸­ï¼Œè¢« `vue-loader` è°ƒç”¨ `compile` æ–¹æ³•é€šè¿‡è¯æ³•åˆ†æç”Ÿæˆä¸€ä¸ª `ast` å¯¹è±¡ï¼Œç„¶åè°ƒç”¨**ä»£ç ç”Ÿæˆå™¨**ï¼Œç»è¿‡éå† `AST` æ ‘é€’å½’çš„æ‹¼æ¥å­—ç¬¦ä¸²æ“ä½œï¼Œæœ€ç»ˆç”Ÿæˆä¸€æ®µ `render` å‡½æ•°ï¼Œ`render` å‡½æ•°æœ€åä¼šå­˜åœ¨æ‰“åŒ…ç”Ÿæˆçš„ `dist` æ–‡ä»¶ä¸­ã€‚

![](https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f544fb5ed8b945bfac6f53a7ec2bd671~tplv-k3u1fbpfcp-watermark.image)

ä¸ºäº†æ›´æ–¹ä¾¿ç†è§£ï¼Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š

```
<div class="demo" @click="handleClick">
  {{ text }}
</div>
```

ç»è¿‡ç¼–è¯‘ä¹‹åï¼Œé€šè¿‡ `ast` è¿›è¡Œåˆ†æï¼Œç”Ÿæˆçš„ `render` å‡½æ•°å¦‚ä¸‹ï¼š

```
_c("div", 
    { staticClass: "demo", on: { click: _vm.handleClick } }ï¼Œ
    [_vm._t("default")]
)
```

**`render` å‡½æ•°ä¼šåœ¨ç¬¬ä¸€æ¬¡ `mount` æ—¶ï¼Œæˆ–è€… `vue` ç»´æŠ¤çš„ `data` æœ‰æ›´æ–°äº§ç”Ÿçš„æ—¶å€™ä¼šè¢«æ‰§è¡Œã€‚**