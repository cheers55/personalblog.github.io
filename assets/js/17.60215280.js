(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{369:function(s,n,e){"use strict";e.r(n);var a=e(45),t=Object(a.a)({},(function(){var s=this,n=s.$createElement,e=s._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"ğŸŒˆ-é˜…è¯»-vue2-æºç "}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ğŸŒˆ-é˜…è¯»-vue2-æºç "}},[s._v("#")]),s._v(" ğŸŒˆ é˜…è¯» Vue2 æºç ")]),s._v(" "),e("h2",{attrs:{id:"_1-ä»€ä¹ˆæ˜¯-mvvm-æ•°æ®åŒå‘ç»‘å®š"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-ä»€ä¹ˆæ˜¯-mvvm-æ•°æ®åŒå‘ç»‘å®š"}},[s._v("#")]),s._v(" 1. ä»€ä¹ˆæ˜¯ MVVM æ•°æ®åŒå‘ç»‘å®š")]),s._v(" "),e("ul",[e("li",[s._v("æ•°æ®å˜åŒ–æ›´æ–°è§†å›¾ï¼Œè§†å›¾å˜åŒ–æ›´æ–°æ•°æ®ã€‚å¦‚å›¾ï¼š")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/vue_mvvm.png",alt:"mvvmæ•°æ®åŒå‘ç»‘å®š"}})]),s._v(" "),e("p",[e("code",[s._v("vue")]),s._v(" ä¸ºäº†å®ç°æ•°æ®çš„åŒå‘ç»‘å®šï¼Œå…±åˆ†ä¸º"),e("code",[s._v("5")]),s._v("ä¸ªæ­¥éª¤ï¼š")]),s._v(" "),e("ol",[e("li",[s._v("å®ç°ä¸€ä¸ª"),e("code",[s._v("ç›‘å¬å™¨ï¼ˆOserverï¼‰")]),s._v("ï¼Œç”¨æ¥åŠ«æŒå¹¶ç›‘å¬æ‰€æœ‰å±æ€§ï¼Œå¦‚æœå±æ€§å‘ç”Ÿå˜åŒ–ï¼Œå°±é€šçŸ¥è®¢é˜…è€…ï¼›")]),s._v(" "),e("li",[s._v("å®ç°ä¸€ä¸ª"),e("code",[s._v("è®¢é˜…å™¨ï¼ˆDepï¼‰")]),s._v("ï¼Œç”¨æ¥æ”¶é›†è®¢é˜…è€…ï¼Œå¯¹"),e("code",[s._v("ç›‘å¬å™¨ï¼ˆOserverï¼‰")]),s._v("å’Œ"),e("code",[s._v("è®¢é˜…å™¨ï¼ˆDepï¼‰")]),s._v("ç»Ÿä¸€ç®¡ç†ï¼›")]),s._v(" "),e("li",[s._v("å®ç°ä¸€ä¸ª"),e("code",[s._v("è®¢é˜…è€…ï¼ˆWatcherï¼‰")]),s._v("ï¼Œå¯ä»¥æ”¶åˆ°å±æ€§çš„å˜åŒ–é€šçŸ¥å¹¶æ‰§è¡Œç›¸åº”çš„æ–¹æ³•ï¼Œä»è€Œæ›´æ–°è§†å›¾ï¼›")]),s._v(" "),e("li",[s._v("å®ç°ä¸€ä¸ª"),e("code",[s._v("è§£æå™¨ï¼ˆCompileï¼‰")]),s._v("ï¼Œå¯ä»¥è§£ææ¯ä¸ªèŠ‚ç‚¹çš„ç›¸å…³æŒ‡ä»¤ï¼Œå¯¹æ¨¡æ¿æ•°æ®å’Œè®¢é˜…å™¨è¿›è¡Œåˆå§‹åŒ–ï¼›")]),s._v(" "),e("li",[s._v("å®ç°ä¸€ä¸ª"),e("code",[s._v("æ‰¹é‡ç®¡ç†å™¨ï¼ˆBatcherï¼‰")]),s._v("ï¼Œå¯ä»¥æ‰¹é‡å¤„ç†å¤šä¸ªè®¢é˜…è€…æ¥ç»Ÿä¸€è¿›è¡Œæ›´æ–°ï¼Œé˜²æ­¢é¡µé¢å¡é¡¿ï¼›")])]),s._v(" "),e("p",[e("img",{attrs:{src:"/vue_reactive.jpg",alt:"vue_reactive"}})]),s._v(" "),e("ul",[e("li",[s._v("ç°åœ¨æˆ‘ä»¬ä¸¾ä¸€ä¸ª"),e("code",[s._v("vue")]),s._v("å®ä¾‹ï¼Œæ­£å¼å¼€å§‹å­¦ä¹ ä¹‹è·¯ã€‚")])]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v('// vueå®ä¾‹\nconst vm = new Vue({\n    el: "#app",\n    data: {\n        text: "Hello World"\n    }\n});\n')])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])]),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// MVVM.js\nfunction Vue(options){\n    // ä»vueå®ä¾‹é‡ŒæŠŠæ•°æ®æ‹¿å‡ºæ¥\n    this.data = options.data;\n    // å‡å°‘ä½œç”¨åŸŸé“¾æŸ¥æ‰¾çš„è¿‡ç¨‹\n    var data = this.data;\n    // ç›‘å¬æ‰€æœ‰çš„æ•°æ®\n    observer(data, this);\n    var id = options.el;\n    var el = ocument.querySelector(id);\n    // ç¼–è¯‘dom\n    var dom = new Compile(el, this);\n    el.appendChild(dom);\n};\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br")])]),e("h2",{attrs:{id:"_2-ç›‘å¬å™¨-oserver-å®ç°"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-ç›‘å¬å™¨-oserver-å®ç°"}},[s._v("#")]),s._v(" 2. ç›‘å¬å™¨ï¼ˆOserverï¼‰å®ç°")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// Observer\nfunction Observer(data, vm){\n    // ä¸ºäº†ç›‘å¬æ‰€æœ‰å±æ€§ï¼Œå…ˆè¦å¾ªç¯ä¸€ä¸‹æ•°æ®\n    Object.keys(data).forEach(function(key){\n        defineReactive(vm, key, data[key]);\n    });\n}\n\nfunction defineReactive(vm, key, val){\n    var dep = new Dep();\n    // åŠ«æŒæ‰€æœ‰å±æ€§ï¼Œè¿›è¡Œsetå’Œget\n    Object.defineProperty(vm, key, {\n        get: function(){\n            if(Dep.target){\n                // æ”¶é›†ä¾èµ–\n                dep.addSub(Dep.target);\n            }\n            return val;\n        },\n        set: function(newVal){\n            if(val === newVal) return;\n            val = newVal;\n            // å‘å‡ºé€šçŸ¥\n            dep.notify();\n        }\n    })\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br"),e("span",{staticClass:"line-number"},[s._v("24")]),e("br"),e("span",{staticClass:"line-number"},[s._v("25")]),e("br"),e("span",{staticClass:"line-number"},[s._v("26")]),e("br"),e("span",{staticClass:"line-number"},[s._v("27")]),e("br")])]),e("ul",[e("li",[s._v("é€šè¿‡ä»¥ä¸Šä»£ç æˆ‘ä»¬ä¸éš¾çœ‹å‡ºï¼Œæºç ä¸€ä¸Šæ¥å¯¹"),e("code",[s._v("data")]),s._v("è¿›è¡Œäº†éå†å¹¶åˆ©ç”¨åŒå‘ç»‘å®šçš„å…³é”®æ–¹æ³•"),e("code",[s._v("Object.defineProperty")]),s._v("å¯¹æ•°æ®è¿›è¡Œè¯»æˆ–è€…å†™ï¼Œå¹¶åˆ©ç”¨"),e("code",[s._v("Depï¼ˆæ„é€ å™¨ï¼‰")]),s._v("è¿›è¡Œæ”¶é›†ä¾èµ–å’Œå‘å‡ºé€šçŸ¥ã€‚")])]),s._v(" "),e("blockquote",[e("p",[s._v("å¾ˆå¤šäººé¢è¯•çš„æ—¶å€™åªèƒ½å›ç­”ç¬¬ä¸€æ­¥ï¼Œç®€å•çš„è¯´ä¸€ä¸‹"),e("code",[s._v("Object.defineProperty")]),s._v("çš„ç”¨æ³•ï¼Œä¸€å¸¦è€Œè¿‡ã€‚è¿™æˆ–è®¸å°±æ˜¯å¾ˆå¤šå‰ç«¯å¼€å§‹åŒºåˆ†ä¸åŒè–ªèµ„ã€ä¸åŒé˜¶çº§çš„åˆ†æ°´ç‚¹ã€‚")])]),s._v(" "),e("p",[s._v("ä¸Šè¾¹ä»£ç æåˆ°äº†"),e("code",[s._v("è®¢é˜…å™¨ï¼ˆDepï¼‰")]),s._v("ï¼Œé‚£å®ƒåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Œä¸Šæºç ã€‚")]),s._v(" "),e("h2",{attrs:{id:"_3-è®¢é˜…å™¨-dep-çš„å®ç°"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_3-è®¢é˜…å™¨-dep-çš„å®ç°"}},[s._v("#")]),s._v(" 3. è®¢é˜…å™¨ï¼ˆDepï¼‰çš„å®ç°")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// Dep\nfunction Dep(){\n    this.subs = [];\n}\n\nDep.prototype = {\n    addSub: function(sub){\n        // æ”¶é›†ä¾èµ–\n        this.subs.push(sub);\n    },\n    notify: function(){\n        this.subs.forEach(function(sub){\n            // æ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½ä¼šè¢«é€šçŸ¥\n            sub.update();\n        });\n    }\n};\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("ul",[e("li",[s._v("ç®€å•ä¸€çœ‹ä»£ç ï¼Œæ˜¯ä¸æ˜¯æœ‰ä¸€ç§å¾ˆç®€å•çš„æ„Ÿè§‰ï¼Œç®€å•çš„ä½ æƒ³å“­ğŸ˜‚ï¼Œä½†ä½ è¿˜æ˜¯çœ‹ä¸æ‡‚ï¼Œ"),e("code",[s._v("Dep")]),s._v("åˆ°åº•æ˜¯ä¸ªå•¥ï¼Œä¸ç€æ€¥ï¼Œæ¥ä¸‹å¾€ä¸‹çœ‹ã€‚")])]),s._v(" "),e("h2",{attrs:{id:"_4-è§£æå™¨-compile"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_4-è§£æå™¨-compile"}},[s._v("#")]),s._v(" 4. è§£æå™¨ï¼ˆCompileï¼‰")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("// Compile\nfunction Compile(node, vm){\n    if(node){\n        // æ¨¡ä»¿è™šæ‹Ÿdom\n        this.$frags = this.nodeToFragment(node, vm);\n        return this.$frags;\n    }\n}\n\nCompile.prototype = {\n    nodeToFragment(node, vm){\n        var _this = this;\n        var frag = docum,\n    }\n}\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("blockquote",[e("p",[s._v("vueæ˜¯ä¸æ”¯æŒä½ç‰ˆæœ¬æµè§ˆå™¨çš„ï¼Œæ¯”å¦‚ie6ã€7ã€8ï¼Œä½†æ˜¯å¦‚æœæƒ³å…¼å®¹æ€ä¹ˆåŠï¼Œç™¾åº¦æœ‰è‡ªå·±çš„"),e("code",[s._v("san.js")]),s._v(" MVVMæ¡†æ¶ï¼ŒåŸç†æ˜¯æ£€æµ‹æµè§ˆå™¨æ˜¯å¦å­˜åœ¨ "),e("code",[s._v("__defineGetter__")]),s._v(" å’Œ "),e("code",[s._v("__defineSetter__")]),s._v("ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œå¾®è½¯ä¹Ÿæœ‰è‡ªå·±çš„ "),e("code",[s._v("VBScript")]),s._v("ã€‚")])])])}),[],!1,null,null,null);n.default=t.exports}}]);