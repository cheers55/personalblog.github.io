(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{440:function(_,v,t){"use strict";t.r(v);var e=t(56),a=Object(e.a)({},(function(){var _=this,v=_.$createElement,t=_._self._c||v;return t("ContentSlotsDistributor",{attrs:{"slot-key":_.$parent.slotKey}},[t("h1",{attrs:{id:"🌈-tcp-三次握手🤝"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#🌈-tcp-三次握手🤝"}},[_._v("#")]),_._v(" 🌈 TCP 三次握手🤝")]),_._v(" "),t("ul",[t("li",[_._v("其实三次握手就是你和家人一个打电话的过程：")])]),_._v(" "),t("ol",[t("li",[_._v("在手机上按出对方手机号并拨出；")]),_._v(" "),t("li",[_._v("对方查看来电手机号并确认接通；")]),_._v(" "),t("li",[_._v("你确认对方已经接通，会喊一句“喂，听得到吗？”；")])]),_._v(" "),t("h2",{attrs:{id:"_1-第一次握手"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-第一次握手"}},[_._v("#")]),_._v(" 1. 第一次握手")]),_._v(" "),t("p",[_._v("客户端向服务端发送标记位 "),t("code",[_._v("SYN")]),_._v("，序号为 "),t("code",[_._v("Seq=x（x一般为1）")]),_._v("，表示请求建立新连接，随后客户端进入 "),t("code",[_._v("SYN-SENT")]),_._v(" 阶段。")]),_._v(" "),t("h2",{attrs:{id:"_2-第二次握手"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-第二次握手"}},[_._v("#")]),_._v(" 2. 第二次握手")]),_._v(" "),t("p",[_._v("服务端收到客户端请求后，结束 "),t("code",[_._v("LISTEN")]),_._v(" 阶段，返回标志位为 "),t("code",[_._v("SYN")]),_._v(" 和 "),t("code",[_._v("ACK")]),_._v("，表示确认客户端的报文 "),t("code",[_._v("Seq")]),_._v(" 序号有效，服务端可以正常接收客户端发来的数据，并同意创建新连接，确认号为 "),t("code",[_._v("ACK=x+1")]),_._v("，序号为 "),t("code",[_._v("Seq=y")]),_._v(" 随后服务端进入 "),t("code",[_._v("SYN-RCVD")]),_._v(" 阶段。")]),_._v(" "),t("h2",{attrs:{id:"_3-第三次握手"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-第三次握手"}},[_._v("#")]),_._v(" 3. 第三次握手")]),_._v(" "),t("p",[_._v("客户端接受并确认来自服务端报文后，标志位为 "),t("code",[_._v("ACK")]),_._v("，表示确认收到服务端的连接信号，序号为 "),t("code",[_._v("Seq=x+1")]),_._v("，表示收到服务端的确认号 "),t("code",[_._v("ACK")]),_._v("，并将其值作为自己的序号值，确认号 "),t("code",[_._v("ACK=y+1")]),_._v("，表示收到服务端序号 "),t("code",[_._v("Seq")]),_._v("，并将其值加1作为自己的确认号 "),t("code",[_._v("ACK")]),_._v(" 的值，随后客户端进入 "),t("code",[_._v("ESTABLISHED")]),_._v(" 阶段。")]),_._v(" "),t("p",[t("img",{attrs:{src:"https://pic.rmb.bdstatic.com/861fa058f2da35f8efa70b29bf7c45fd8689.gif",alt:""}})]),_._v(" "),t("h2",{attrs:{id:"_4-为什么建立连接需要三次握手"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-为什么建立连接需要三次握手"}},[_._v("#")]),_._v(" 4. 为什么建立连接需要三次握手？")]),_._v(" "),t("ul",[t("li",[_._v("第三次握手是为了防止已经失效的连接请求报文段突然又传到服务端，因而产生错误。")])]),_._v(" "),t("blockquote",[t("p",[_._v("如果只有两次握手（第一次、第二次），那么到这里，连接就建立了，但是此时客户端并没有任何数据要发送，而服务端还在傻傻的等，造成很大的资源浪费。所以需要第三次握手，只有客户端再次回应一下，就可以避免这种情况。")])])])}),[],!1,null,null,null);v.default=a.exports}}]);