<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ğŸŒˆ React å‡½æ•°å¼ç»„ä»¶ä¼˜åŒ– | ğŸŒˆ ç¨‹æ™“è¾‰</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="Personal Website">
    
    <link rel="preload" href="/assets/css/0.styles.144694f2.css" as="style"><link rel="preload" href="/assets/js/app.80932d58.js" as="script"><link rel="preload" href="/assets/js/2.18533563.js" as="script"><link rel="preload" href="/assets/js/12.f9d257f4.js" as="script"><link rel="prefetch" href="/assets/js/10.f25dd1bf.js"><link rel="prefetch" href="/assets/js/11.a69afff9.js"><link rel="prefetch" href="/assets/js/13.20b11a97.js"><link rel="prefetch" href="/assets/js/14.810e4b1f.js"><link rel="prefetch" href="/assets/js/15.c36e114b.js"><link rel="prefetch" href="/assets/js/16.bd6acbb9.js"><link rel="prefetch" href="/assets/js/17.60215280.js"><link rel="prefetch" href="/assets/js/18.5e648566.js"><link rel="prefetch" href="/assets/js/19.61b56b98.js"><link rel="prefetch" href="/assets/js/20.761b5cca.js"><link rel="prefetch" href="/assets/js/21.7374f975.js"><link rel="prefetch" href="/assets/js/22.15170c1f.js"><link rel="prefetch" href="/assets/js/23.4a5d8046.js"><link rel="prefetch" href="/assets/js/24.3b83f50e.js"><link rel="prefetch" href="/assets/js/25.b1b69ffc.js"><link rel="prefetch" href="/assets/js/26.03bd7189.js"><link rel="prefetch" href="/assets/js/27.10f6a6ae.js"><link rel="prefetch" href="/assets/js/28.0e1f7377.js"><link rel="prefetch" href="/assets/js/29.ddaa95d7.js"><link rel="prefetch" href="/assets/js/3.ca8c9078.js"><link rel="prefetch" href="/assets/js/30.1d37166e.js"><link rel="prefetch" href="/assets/js/31.6b1fddc7.js"><link rel="prefetch" href="/assets/js/32.a775b6ec.js"><link rel="prefetch" href="/assets/js/33.ff9a77af.js"><link rel="prefetch" href="/assets/js/34.a43179e6.js"><link rel="prefetch" href="/assets/js/35.b80e6905.js"><link rel="prefetch" href="/assets/js/36.75d54dff.js"><link rel="prefetch" href="/assets/js/37.baad6757.js"><link rel="prefetch" href="/assets/js/38.fc998dfb.js"><link rel="prefetch" href="/assets/js/39.b44c754e.js"><link rel="prefetch" href="/assets/js/4.dc37f147.js"><link rel="prefetch" href="/assets/js/40.c52d282f.js"><link rel="prefetch" href="/assets/js/41.7f0cd942.js"><link rel="prefetch" href="/assets/js/42.63992960.js"><link rel="prefetch" href="/assets/js/43.ab5b44a3.js"><link rel="prefetch" href="/assets/js/44.ed4d586a.js"><link rel="prefetch" href="/assets/js/45.d526a219.js"><link rel="prefetch" href="/assets/js/46.d3d2e979.js"><link rel="prefetch" href="/assets/js/47.5984907d.js"><link rel="prefetch" href="/assets/js/5.255bf93f.js"><link rel="prefetch" href="/assets/js/6.22294c7e.js"><link rel="prefetch" href="/assets/js/7.b8a9aa15.js"><link rel="prefetch" href="/assets/js/8.6f561a93.js"><link rel="prefetch" href="/assets/js/9.9930b8df.js">
    <link rel="stylesheet" href="/assets/css/0.styles.144694f2.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ğŸŒˆ ç¨‹æ™“è¾‰</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/share/" class="nav-link">
  æŠ€æœ¯é›†
</a></div><div class="nav-item"><a href="/engineering/" class="nav-link">
  å·¥ç¨‹åŒ–
</a></div><div class="nav-item"><a href="/frame/" class="nav-link router-link-active">
  æ¡†æ¶
</a></div><div class="nav-item"><a href="/panClient/" class="nav-link">
  æ³›å®¢æˆ·ç«¯
</a></div><div class="nav-item"><a href="/aboutMe/" class="nav-link">
  å…³äºæˆ‘
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/share/" class="nav-link">
  æŠ€æœ¯é›†
</a></div><div class="nav-item"><a href="/engineering/" class="nav-link">
  å·¥ç¨‹åŒ–
</a></div><div class="nav-item"><a href="/frame/" class="nav-link router-link-active">
  æ¡†æ¶
</a></div><div class="nav-item"><a href="/panClient/" class="nav-link">
  æ³›å®¢æˆ·ç«¯
</a></div><div class="nav-item"><a href="/aboutMe/" class="nav-link">
  å…³äºæˆ‘
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>ğŸŒˆ React å‡½æ•°å¼ç»„ä»¶ä¼˜åŒ–</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/frame/react/reactFunction.html#_1-react-æ€§èƒ½ä¼˜åŒ–æ€è·¯" class="sidebar-link">1. React æ€§èƒ½ä¼˜åŒ–æ€è·¯</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/frame/react/reactFunction.html#_2-å‡½æ•°ç»„ä»¶ä¼˜åŒ–æ–¹æ³•" class="sidebar-link">2. å‡½æ•°ç»„ä»¶ä¼˜åŒ–æ–¹æ³•</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/frame/react/reactFunction.html#_2-1-react-memo-å‡å°‘-render-çš„æ¬¡æ•°" class="sidebar-link">2.1 React.memo ï¼ˆå‡å°‘ render çš„æ¬¡æ•°ï¼‰</a></li><li class="sidebar-sub-header"><a href="/frame/react/reactFunction.html#_2-2-usecallback-å‡å°‘-render-çš„æ¬¡æ•°" class="sidebar-link">2.2 useCallback ï¼ˆå‡å°‘ render çš„æ¬¡æ•°ï¼‰</a></li><li class="sidebar-sub-header"><a href="/frame/react/reactFunction.html#_2-3-usememo-å‡å°‘è®¡ç®—çš„é‡" class="sidebar-link">2.3 useMemo ï¼ˆå‡å°‘è®¡ç®—çš„é‡ï¼‰</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ğŸŒˆ-react-å‡½æ•°å¼ç»„ä»¶ä¼˜åŒ–"><a href="#ğŸŒˆ-react-å‡½æ•°å¼ç»„ä»¶ä¼˜åŒ–" class="header-anchor">#</a> ğŸŒˆ React å‡½æ•°å¼ç»„ä»¶ä¼˜åŒ–</h1> <h2 id="_1-react-æ€§èƒ½ä¼˜åŒ–æ€è·¯"><a href="#_1-react-æ€§èƒ½ä¼˜åŒ–æ€è·¯" class="header-anchor">#</a> 1. React æ€§èƒ½ä¼˜åŒ–æ€è·¯</h2> <ol><li>å‡å°‘é‡æ–° <code>render</code> çš„æ¬¡æ•°ã€‚</li> <li>å‡å°‘è®¡ç®—çš„é‡ã€‚ä¸»è¦æ˜¯å‡å°‘é‡å¤è®¡ç®—ï¼Œå¯¹äºå‡½æ•°å¼ç»„ä»¶æ¥è¯´ï¼Œæ¯æ¬¡ <code>render</code> éƒ½ä¼šé‡æ–°ä»å¤´å¼€å§‹æ‰§è¡Œå‡½æ•°è°ƒç”¨ã€‚</li></ol> <ul><li>åœ¨ä½¿ç”¨ç±»ç»„ä»¶<code>ï¼ˆclassï¼‰</code>çš„æ—¶å€™ï¼Œä½¿ç”¨çš„ <code>React</code> ä¼˜åŒ– API ä¸»è¦æ˜¯ï¼š<code>shouldComponentUpdate</code> å’Œ <code>PureComponent</code>ï¼Œéƒ½æ˜¯ä¸ºäº†å‡å°‘é‡æ–° <code>render</code> çš„æ¬¡æ•°ï¼Œä¸»è¦æ˜¯å‡å°‘çˆ¶ç»„ä»¶æ›´æ–°è€Œå­ç»„ä»¶ä¹Ÿæ›´æ–°çš„æƒ…å†µã€‚</li></ul> <h2 id="_2-å‡½æ•°ç»„ä»¶ä¼˜åŒ–æ–¹æ³•"><a href="#_2-å‡½æ•°ç»„ä»¶ä¼˜åŒ–æ–¹æ³•" class="header-anchor">#</a> 2. å‡½æ•°ç»„ä»¶ä¼˜åŒ–æ–¹æ³•</h2> <h3 id="_2-1-react-memo-å‡å°‘-render-çš„æ¬¡æ•°"><a href="#_2-1-react-memo-å‡å°‘-render-çš„æ¬¡æ•°" class="header-anchor">#</a> 2.1 React.memo ï¼ˆå‡å°‘ render çš„æ¬¡æ•°ï¼‰</h3> <p>å¯ä»¥å‡å°‘é‡æ–° <code>render</code> çš„æ¬¡æ•°ï¼Œå¯¹æ ‡ç±»ç»„ä»¶é‡Œé¢çš„ <code>PureComponent</code>ã€‚</p> <p>ä¸¾ä¸ªç®€å•çš„ğŸŒ° ï¼š</p> <ul><li>ä¿®æ”¹çˆ¶ç»„ä»¶ <strong>title</strong> çš„æ—¶å€™åŒæ—¶ä¼ é€’ç»™å­ç»„ä»¶ä¸€ä¸ª <em>name</em> å€¼ã€‚</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>// çˆ¶ç»„ä»¶
import React, { useState } from &quot;react&quot;;
import ReactDOM from &quot;react-dom&quot;;
import Child from './child'

function Father() {
  const [title, setTitle] = useState(&quot;çˆ¶ç»„ä»¶çš„title&quot;);

  return (
    &lt;div className=&quot;Father&quot;&gt;
      &lt;h1&gt;{ title }&lt;/h1&gt;
      &lt;button onClick={() =&gt; setTitle(&quot;çˆ¶ç»„ä»¶çš„titleæ”¹å˜äº†&quot;)}&gt;ä¿®æ”¹çˆ¶ç»„ä»¶çš„title&lt;/button&gt;
      &lt;Child name=&quot;çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„å€¼&quot;&gt;&lt;/Child&gt;
    &lt;/div&gt;
  );
}

const rootElement = document.getElementById(&quot;root&quot;);
ReactDOM.render(&lt;Father /&gt;, rootElement);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>// å­ç»„ä»¶
import React from &quot;react&quot;;

function Child(props) {
  console.log(props.name)
  return &lt;p&gt;{props.name}&lt;/p&gt;
}

export default Child;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>é¦–æ¬¡æ¸²æŸ“çš„æ•ˆæœå¦‚ä¸‹ï¼š</li></ul> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b7ba075562974ef4a081fdfd39d1166c~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p> <ul><li>å¹¶ä¸”åœ¨æ§åˆ¶å°ä¼šæ‰“å° <strong>&quot;çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„å€¼&quot;</strong>ï¼Œè¯´æ˜ <code>Child</code> ç»„ä»¶æ¸²æŸ“äº†ã€‚</li> <li>æ¥ä¸‹æ¥ç‚¹å‡» <strong>ä¿®æ”¹çˆ¶ç»„ä»¶çš„title</strong> è¿™ä¸ªbuttonï¼Œé¡µé¢ä¼šå˜æˆï¼š</li></ul> <p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f8080c52b5114ec0a315a26bd3301e48~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p> <ul><li>å¯è§ çˆ¶ç»„ä»¶çš„<code>title</code> å·²ç»æ”¹å˜äº†ï¼Œè€Œä¸”æ§åˆ¶å°å†æ¬¡æ‰“å°äº† <strong>&quot;çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„å€¼&quot;</strong>ã€‚å­ç»„ä»¶åœ¨ <code>props</code> æ²¡æœ‰æ”¹å˜çš„æƒ…å†µä¸‹ï¼Œå†æ¬¡æ¸²æŸ“äº†ã€‚å‡è®¾å­ç»„ä»¶å¦‚æœéå¸¸åºå¤§ï¼Œæ¸²æŸ“ä¸€æ¬¡ä¼šæ¶ˆè€—å¾ˆå¤šçš„æ€§èƒ½ï¼Œæˆ‘ä»¬åº”è¯¥å°½é‡å‡å°‘è¿™ä¸ªç»„ä»¶çš„æ¸²æŸ“ï¼Œå¦åˆ™å°±å®¹æ˜“äº§ç”Ÿæ€§èƒ½é—®é¢˜ã€‚</li></ul> <p><code>React.memo</code> åœ¨ç»™å®šç›¸åŒ <code>props</code> çš„æƒ…å†µä¸‹æ¸²æŸ“ç›¸åŒçš„ç»“æœï¼Œå¹¶ä¸”é€šè¿‡è®°å¿†ç»„ä»¶æ¸²æŸ“ç»“æœçš„æ–¹å¼æ¥æé«˜ç»„ä»¶çš„æ€§èƒ½è¡¨ç°ã€‚é‚£ä¹ˆä¸Šé¢çš„ä¾‹å­å°±å¯ä»¥åšå¦‚ä¸‹ä¿®æ”¹ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// å­ç»„ä»¶
import React from &quot;react&quot;;

function Child(props) {
  console.log(props.name)
  return &lt;p&gt;{props.name}&lt;/p&gt;
}

export default React.memo(Child); // ç”¨ React.memo()åŒ…è£¹
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_2-2-usecallback-å‡å°‘-render-çš„æ¬¡æ•°"><a href="#_2-2-usecallback-å‡å°‘-render-çš„æ¬¡æ•°" class="header-anchor">#</a> 2.2 useCallback ï¼ˆå‡å°‘ render çš„æ¬¡æ•°ï¼‰</h3> <p>æ ¹æ®ä¸Šé¢çš„ä¾‹å­ï¼Œå†æ”¹ä¸€ä¸‹éœ€æ±‚ï¼Œçˆ¶ç»„ä»¶æ–°å¢ä¸€ä¸ªå‰¯æ ‡é¢˜å’Œä¸€ä¸ªä¿®æ”¹å‰¯æ ‡é¢˜çš„buttonï¼Œç„¶åæŠŠä¿®æ”¹æ ‡é¢˜çš„buttonæ”¾åˆ°å­ç»„ä»¶é‡Œã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// çˆ¶ç»„ä»¶
import React, { useState } from &quot;react&quot;;
import ReactDOM from &quot;react-dom&quot;;
import Child from &quot;./child&quot;;

function Father() {
  const [title, setTitle] = useState(&quot;çˆ¶ç»„ä»¶çš„title&quot;);
  const [subtitle, setSubtitle] = useState(&quot;çˆ¶ç»„ä»¶çš„å‰¯title&quot;);

  const callback = () =&gt; {
    setTitle(&quot;çˆ¶ç»„ä»¶çš„titleæ”¹å˜äº†&quot;);
  };
  return (
    &lt;div className=&quot;Father&quot;&gt;
      &lt;h1&gt;{title}&lt;/h1&gt;
      &lt;h2&gt;{subtitle}&lt;/h2&gt;
      &lt;button onClick={() =&gt; setSubtitle(&quot;çˆ¶ç»„ä»¶çš„å‰¯titleæ”¹å˜äº†&quot;)}&gt;ä¿®æ”¹çˆ¶ç»„ä»¶çš„å‰¯title&lt;/button&gt;
      &lt;Child onClick={callback} name=&quot;çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„å€¼&quot; /&gt;
    &lt;/div&gt;
  );
}

const rootElement = document.getElementById(&quot;root&quot;);
ReactDOM.render(&lt;Father /&gt;, rootElement);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><div class="language- line-numbers-mode"><pre class="language-text"><code>// å­ç»„ä»¶
import React from &quot;react&quot;;

function Child(props) {
  console.log(props.name);
  return (
    &lt;div&gt;
      &lt;button onClick={props.onClick}&gt;ä¿®æ”¹çˆ¶ç»„ä»¶çš„title&lt;/button&gt;
      &lt;h1&gt;{props.name}&lt;/h1&gt;
    &lt;/div&gt;
  );
}

export default React.memo(Child);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>é¦–æ¬¡æ¸²æŸ“çš„æ•ˆæœå¦‚ä¸‹ï¼š</li></ul> <p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/24c21323c3e34ca6893e703a97a91746~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p> <ul><li><p>å¹¶ä¸”åœ¨æ§åˆ¶å°ä¼šæ‰“å° &quot;çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„å€¼&quot;ï¼Œè¯´æ˜ Child ç»„ä»¶æ¸²æŸ“äº†ã€‚</p></li> <li><p>æ¥ä¸‹æ¥ç‚¹å‡» ä¿®æ”¹çˆ¶ç»„ä»¶çš„å‰¯title è¿™ä¸ªbuttonï¼Œé¡µé¢ä¼šå˜æˆï¼š</p></li></ul> <p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/463f4b09a4ad457fab57e9bcf894656d~tplv-k3u1fbpfcp-zoom-1.image" alt=""></p> <ul><li>å¯è§ çˆ¶ç»„ä»¶çš„å‰¯title å·²ç»æ”¹å˜äº†ï¼Œè€Œä¸”æ§åˆ¶å°å†æ¬¡æ‰“å°äº† &quot;çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„å€¼&quot;ã€‚å­ç»„ä»¶åœ¨ props æ²¡æœ‰æ”¹å˜çš„æƒ…å†µä¸‹ï¼Œå†æ¬¡æ¸²æŸ“äº†ã€‚ä½†æ˜¯å­ç»„ä»¶æ²¡æœ‰ä»»ä½•å˜åŒ–ï¼Œé‚£ä¹ˆè¿™æ¬¡å­ç»„ä»¶çš„é‡æ–°æ¸²æŸ“å°±æ˜¯å¤šä½™çš„ï¼Œä¸ºä»€ä¹ˆåˆé‡æ–°æ¸²æŸ“äº†å‘¢ï¼Ÿ</li></ul> <p><strong>ä¸€ä¸ªç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä¸€èˆ¬æœ‰3ç§æƒ…å†µï¼š</strong></p> <ol><li>ç»„ä»¶è‡ªå·±çš„çŠ¶æ€æ”¹å˜ï¼›</li> <li>çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå¯¼è‡´å­ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯çˆ¶ç»„ä»¶çš„ <code>props</code> æ²¡æœ‰æ”¹å˜ï¼›</li> <li>çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œå¯¼è‡´å­ç»„ä»¶é‡æ–°æ¸²æŸ“ï¼Œä½†æ˜¯çˆ¶ç»„ä»¶ä¼ é€’çš„ <code>props</code> æ”¹å˜äº†ï¼›</li></ol> <blockquote><p>ç¬¬ä¸€ç§æœæ–­æ’é™¤ï¼Œå½“ç‚¹å‡»ä¿®æ”¹å‰¯titleçš„æ—¶å€™å¹¶æ²¡æœ‰å»æ”¹å˜å­ç»„ä»¶çš„çŠ¶æ€;</p></blockquote> <blockquote><p>ç¬¬äºŒç§æƒ³ä¸€ä¸‹ä¹Ÿåº”è¯¥æ’é™¤ï¼Œçˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“äº†ï¼Œçˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„ <code>props</code> æ²¡æœ‰æ”¹å˜ï¼Œä½†æ˜¯å­ç»„ä»¶é‡æ–°æ¸²æŸ“äº†ï¼Œæˆ‘ä»¬è¿™ä¸ªæ—¶å€™ç”¨ <code>React.memo</code> æ¥è§£å†³äº†è¿™ä¸ªé—®é¢˜;</p></blockquote> <blockquote><p>é‚£ä¹ˆåº”è¯¥æ˜¯ç¬¬ä¸‰ç§æƒ…å†µäº†ï¼Œå½“çˆ¶ç»„ä»¶é‡æ–°æ¸²æŸ“çš„æ—¶å€™ï¼Œä¼ é€’ç»™å­ç»„ä»¶çš„ <code>props</code> å‘ç”Ÿäº†æ”¹å˜ï¼Œä¼ é€’ç»™å­ç»„ä»¶çš„å°±ä¸¤ä¸ªå±æ€§ï¼Œä¸€ä¸ªæ˜¯ nameï¼Œå¦ä¸€ä¸ªæ˜¯ onClick ï¼Œname ä¼ é€’çš„æ˜¯å¸¸é‡ï¼Œæ²¡æœ‰å˜ï¼Œå˜çš„å°±æ˜¯ onClick äº†ï¼Œä¸ºä»€ä¹ˆä¼ é€’ç»™ onClick çš„ callback å‡½æ•°ä¼šå‘ç”Ÿæ”¹å˜å‘¢ï¼Ÿåœ¨æ–‡ç« çš„å¼€å¤´å°±å·²ç»è¯´è¿‡äº†ï¼Œåœ¨å‡½æ•°å¼ç»„ä»¶é‡Œæ¯æ¬¡é‡æ–°æ¸²æŸ“ï¼Œå‡½æ•°ç»„ä»¶éƒ½ä¼šé‡å¤´å¼€å§‹é‡æ–°æ‰§è¡Œï¼Œé‚£ä¹ˆè¿™ä¸¤æ¬¡åˆ›å»ºçš„ callback å‡½æ•°è‚¯å®šå‘ç”Ÿäº†æ”¹å˜ï¼Œæ‰€ä»¥å¯¼è‡´äº†å­ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚</p></blockquote> <p><code>useCallback</code> åœ¨å‡½æ•°æ²¡æœ‰æ”¹å˜çš„æ—¶å€™ï¼Œé‡æ–°æ¸²æŸ“çš„æ—¶å€™ä¿æŒä¸¤ä¸ªå‡½æ•°çš„å¼•ç”¨ä¸€è‡´ï¼Œé‚£ä¹ˆä¸Šé¢çš„ä¾‹å­å°±å¯ä»¥åšå¦‚ä¸‹ä¿®æ”¹ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// çˆ¶ç»„ä»¶
import React, { useState, useCallback } from &quot;react&quot;;
import ReactDOM from &quot;react-dom&quot;;
import Child from &quot;./child&quot;;

function Father() {
  const [title, setTitle] = useState(&quot;çˆ¶ç»„ä»¶çš„title&quot;);
  const [subtitle, setSubtitle] = useState(&quot;çˆ¶ç»„ä»¶çš„å‰¯title&quot;);

  const callback = () =&gt; {
    setTitle(&quot;çˆ¶ç»„ä»¶çš„titleæ”¹å˜äº†&quot;);
  };
  
  // é€šè¿‡ useCallback è¿›è¡Œè®°å¿† callbackï¼Œå¹¶å°†è®°å¿†çš„ callback ä¼ é€’ç»™å­ç»„ä»¶
  const _callback = useCallback(callback, []);
  
  return (
    &lt;div className=&quot;Father&quot;&gt;
      &lt;h1&gt;{title}&lt;/h1&gt;
      &lt;h2&gt;{subtitle}&lt;/h2&gt;
      &lt;button onClick={() =&gt; setSubtitle(&quot;çˆ¶ç»„ä»¶çš„å‰¯titleæ”¹å˜äº†&quot;)}&gt;ä¿®æ”¹çˆ¶ç»„ä»¶çš„å‰¯title&lt;/button&gt;
      &lt;Child onClick={_callback} name=&quot;çˆ¶ç»„ä»¶ä¼ é€’ç»™å­ç»„ä»¶çš„å€¼&quot; /&gt;
    &lt;/div&gt;
  );
}

const rootElement = document.getElementById(&quot;root&quot;);
ReactDOM.render(&lt;Father /&gt;, rootElement);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h3 id="_2-3-usememo-å‡å°‘è®¡ç®—çš„é‡"><a href="#_2-3-usememo-å‡å°‘è®¡ç®—çš„é‡" class="header-anchor">#</a> 2.3 useMemo ï¼ˆå‡å°‘è®¡ç®—çš„é‡ï¼‰</h3> <p><code>useMemo</code> ä¸»è¦æ˜¯ç”¨æ¥ç¼“å­˜è®¡ç®—é‡æ¯”è¾ƒå¤§çš„å‡½æ•°ç»“æœï¼Œå¯ä»¥é¿å…ä¸å¿…è¦çš„é‡å¤è®¡ç®—ï¼Œå’Œ <code>Vue</code> é‡Œé¢çš„ <code>computed</code> æœ‰å¼‚æ›²åŒå·¥çš„ä½œç”¨ï¼Œå¯ä»¥å‡å°‘è®¡ç®—çš„é‡ã€‚</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import React, { useState } from &quot;react&quot;;
function App() {
  const [num, setNum] = useState(0);

  // ä¸€ä¸ªéå¸¸è€—æ—¶çš„ä¸€ä¸ªè®¡ç®—å‡½æ•°
  // result æœ€åè¿”å›çš„å€¼æ˜¯ 49995000
  function resultFn() {
    let result = 0;
    
    for (let i = 0; i &lt; 10000; i++) {
      result += i;
    }
    
    console.log(result) // 49995000
    return result;
  }

  const resultNum = resultFn();

  return (
    &lt;div className=&quot;App&quot;&gt;
      &lt;h1&gt;countï¼š{num}&lt;/h1&gt;
      &lt;button onClick={() =&gt; setNum(num + resultNum)}&gt;+1&lt;/button&gt;
    &lt;/div&gt;
  );
}

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>å¦‚æœæˆ‘ä»¬æŠŠ <code>i</code> å˜æˆ10000000ï¼Œæ¯æ¬¡ç‚¹å‡» +1 æŒ‰é’®çš„æ—¶å€™ï¼Œéƒ½ä¼šé‡æ–°æ¸²æŸ“ä¸”å¾—åˆ°çš„ç»“æœéƒ½æ˜¯ä¸€æ ·çš„ï¼Œè¿™æ ·ä¼šå¯¹æ€§èƒ½é€ æˆä¸€äº›å½±å“ï¼Œæˆ‘ä»¬å¯ä»¥åšå¦‚ä¸‹ä¿®æ”¹ï¼š</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import React, { useState, useMemo } from &quot;react&quot;;
function App() {
  const [num, setNum] = useState(0);

  // ä¸€ä¸ªéå¸¸è€—æ—¶çš„ä¸€ä¸ªè®¡ç®—å‡½æ•°
  // result æœ€åè¿”å›çš„å€¼æ˜¯ 49995000
  function resultFn() {
    let result = 0;
    
    for (let i = 0; i &lt; 10000; i++) {
      result += i;
    }
    
    console.log(result) // 49995000
    return result;
  }

  const resultNum = useMemo(resultFn, []); //è¿™ä½¿ç”¨äº† useMemo

  return (
    &lt;div className=&quot;App&quot;&gt;
      &lt;h1&gt;countï¼š{num}&lt;/h1&gt;
      &lt;button onClick={() =&gt; setNum(num + resultNum)}&gt;+1&lt;/button&gt;
    &lt;/div&gt;
  );
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><p>éœ€è¦æ³¨æ„ä¸¤ç‚¹ï¼š</p> <blockquote><p>ä¸€ã€å¦‚æœæ²¡æœ‰æä¾›ä¾èµ–é¡¹æ•°ç»„ï¼ŒuseMemo åœ¨æ¯æ¬¡æ¸²æŸ“æ—¶éƒ½ä¼šè®¡ç®—æ–°çš„å€¼ï¼›</p></blockquote> <blockquote><p>äºŒã€å¦‚æœè®¡ç®—é‡å¾ˆå°çš„è®¡ç®—å‡½æ•°ï¼Œå¯ä»¥é€‰æ‹©ä¸ä½¿ç”¨ useMemoï¼Œé¿å…ä½¿ç”¨ä¸å½“é€ æˆå…¶ä»–é—®é¢˜ï¼›</p></blockquote> <p><a href="www.chengxiaohui.cn">æ›´å¤šæŠ€æœ¯åˆ†äº«è¯·å…³æ³¨æˆ‘çš„ä¸ªäººåšå®¢ www.chengxiaohui.cnã€‚æ¬¢è¿éªšæ‰°â”(<em>ï½€âˆ€Â´</em>)ãƒäº»!</a></p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.80932d58.js" defer></script><script src="/assets/js/2.18533563.js" defer></script><script src="/assets/js/12.f9d257f4.js" defer></script>
  </body>
</html>
